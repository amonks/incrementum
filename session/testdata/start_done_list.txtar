# setup repo
mkdir repo
cd repo
exec jj git init

# create todo
stdin input.txt
exec $INCR todo create 'Session todo'

exec $INCR todo list --json
todoid stdout 'Session todo' TODO_ID

# start session
exec $INCR session start $TODO_ID
envset WORKSPACE_PATH stdout
exists $WORKSPACE_PATH

# list sessions
exec $INCR session list --json
stdout ${TODO_ID@R}
stdout '"status": "active"'
stdout '"workspace_name": "ws-[0-9]{3}"'

# mark done
exec $INCR session done $TODO_ID
stdout 'marked completed'

-- repo/input.txt --
y
